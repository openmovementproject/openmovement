<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OMAPI: Device status</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><a href="http://code.google.com/p/openmovement/"><img border=0 alt="Logo" src="logo.png"/></a></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">OMAPI
   &#160;<span id="projectnumber">1.2</span>
   </div>
   <div id="projectbrief">Open Movement Public API</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__device__status.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Device status</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr class="memitem:ga38d39fc1b239750481a9e1d1e09d3d3a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga38d39fc1b239750481a9e1d1e09d3d3a">OM_MEMORY_HEALTH_ERROR</a>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:ga2e73da291028470f0afeb4ad971789f2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga2e73da291028470f0afeb4ad971789f2">OM_MEMORY_HEALTH_WARNING</a>&#160;&#160;&#160;8</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gabe7b78da9c5b300c95f52d0d84710b04"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#gabe7b78da9c5b300c95f52d0d84710b04">OM_LED_STATE</a> { <br/>
&#160;&#160;<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04a5631c62a80445183e3c676aba884bf00">OM_LED_AUTO</a> =  -1, 
<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04a813c2ef7722beedbfd2972bc7c284b7f">OM_LED_OFF</a> =  0, 
<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04ad66d8eeacbfff1ee32a32460caba9def">OM_LED_BLUE</a> =  1, 
<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04a4d3b634463d7ebd7e555c4c541782f52">OM_LED_GREEN</a> =  2, 
<br/>
&#160;&#160;<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04a53c7307e3c7e78a6e2dbcf334253ad6f">OM_LED_CYAN</a> =  3, 
<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04ad24f49da8f07c990c1886e03009d3d3c">OM_LED_RED</a> =  4, 
<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04a0c5c277d9e6c379114080167667705b7">OM_LED_MAGENTA</a> =  5, 
<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04a308364023f864420f99cc92ea673ceb3">OM_LED_YELLOW</a> =  6, 
<br/>
&#160;&#160;<a class="el" href="group__device__status.html#ggabe7b78da9c5b300c95f52d0d84710b04a7fd0f086bdf354819c65cc555a71906a">OM_LED_WHITE</a> =  7
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga319d82922d6535bde07ee51d389b2e05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga319d82922d6535bde07ee51d389b2e05">OmGetVersion</a> (int deviceId, int *firmwareVersion, int *hardwareVersion)</td></tr>
<tr class="memitem:ga9b604ad6d817efca9167d86f6b852cef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga9b604ad6d817efca9167d86f6b852cef">OmGetBatteryLevel</a> (int deviceId)</td></tr>
<tr class="memitem:ga86b956058c1d14caa7a44370b17b77d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga86b956058c1d14caa7a44370b17b77d1">OmSelfTest</a> (int deviceId)</td></tr>
<tr class="memitem:ga037f3403839e450446875be5414ef146"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga037f3403839e450446875be5414ef146">OmGetMemoryHealth</a> (int deviceId)</td></tr>
<tr class="memitem:ga11168e52e0879a91ff11566a05cbe219"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga11168e52e0879a91ff11566a05cbe219">OmGetBatteryHealth</a> (int deviceId)</td></tr>
<tr class="memitem:gadb4931936b04fc2b2753dd7570fb0028"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#gadb4931936b04fc2b2753dd7570fb0028">OmGetAccelerometer</a> (int deviceId, int *x, int *y, int *z)</td></tr>
<tr class="memitem:ga197cb5b376387258a46a442f5a7350d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga197cb5b376387258a46a442f5a7350d2">OmGetTime</a> (int deviceId, <a class="el" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> *time)</td></tr>
<tr class="memitem:ga86748ef90383c9505def75d7bea49c45"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga86748ef90383c9505def75d7bea49c45">OmSetTime</a> (int deviceId, <a class="el" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> time)</td></tr>
<tr class="memitem:gae974d7eec0b9c41a1251dfa63d4ec671"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a> (int deviceId, <a class="el" href="group__device__status.html#gabe7b78da9c5b300c95f52d0d84710b04">OM_LED_STATE</a> ledState)</td></tr>
<tr class="memitem:gaa7fc50ed7054eed6fedb229791125592"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#gaa7fc50ed7054eed6fedb229791125592">OmIsLocked</a> (int deviceId, int *hasLockCode)</td></tr>
<tr class="memitem:gaee8090cd743c037030b94fd9532f09f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#gaee8090cd743c037030b94fd9532f09f2">OmSetLock</a> (int deviceId, unsigned short code)</td></tr>
<tr class="memitem:ga98ef5d1dea89ef11898eb443b55615dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga98ef5d1dea89ef11898eb443b55615dd">OmUnlock</a> (int deviceId, unsigned short code)</td></tr>
<tr class="memitem:ga0190e53ce5c6e2a951c1e5411698ea7a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga0190e53ce5c6e2a951c1e5411698ea7a">OmSetEcc</a> (int deviceId, int state)</td></tr>
<tr class="memitem:ga4213616781314e28dbf69280a30f5fe4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga4213616781314e28dbf69280a30f5fe4">OmGetEcc</a> (int deviceId)</td></tr>
<tr class="memitem:ga15580d1b8aa426a15915fb030518f8d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__device__status.html#ga15580d1b8aa426a15915fb030518f8d4">OmCommand</a> (int deviceId, const char *command, char *buffer, size_t bufferSize, const char *expected, unsigned int timeoutMs, char **parseParts, int parseMax)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Functions to support querying the device version, battery level, health and time, and setting of the time and LED indicator. </p>
<p>The version of the firmware and hardware on the device, an internal self-test status, and Flash memory health can be queried with <a class="el" href="group__device__status.html#ga319d82922d6535bde07ee51d389b2e05" title="Returns the firmware and hardware versions of the specified device.">OmGetVersion()</a>, <a class="el" href="group__device__status.html#ga86b956058c1d14caa7a44370b17b77d1" title="Performs a firmware-specific self-test on the specified device (e.g.">OmSelfTest()</a>, <a class="el" href="group__device__status.html#ga037f3403839e450446875be5414ef146" title="Determine the health of the NAND flash memory on the specified device.">OmGetMemoryHealth()</a>.</p>
<p>The devices incorporate a rechargeable battery, the charge level and battery health can be determined with <a class="el" href="group__device__status.html#ga9b604ad6d817efca9167d86f6b852cef" title="Queries the specified device for the current battery charging level.">OmGetBatteryLevel()</a> and <a class="el" href="group__device__status.html#ga11168e52e0879a91ff11566a05cbe219" title="Determine the health of the battery on the specified device.">OmGetBatteryHealth()</a>.</p>
<p>The on-board real time clock can be accessed with the functions: <a class="el" href="group__device__status.html#ga197cb5b376387258a46a442f5a7350d2" title="Queries the specified device&#39;s internal real time clock.">OmGetTime()</a>, <a class="el" href="group__device__status.html#ga86748ef90383c9505def75d7bea49c45" title="Sets the specified device&#39;s internal real time clock.">OmSetTime()</a>.</p>
<p>The on-board triaxial accelerometer can be accessed to give an instantaneous reading with: <a class="el" href="group__device__status.html#gadb4931936b04fc2b2753dd7570fb0028" title="Gets the specified device&#39;s current accelerometer values.">OmGetAccelerometer()</a>.</p>
<p>The device's 7-colour external LED indicator can be directly controlled with <a class="el" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671" title="Sets the specified device&#39;s LED colour.">OmSetLed()</a>.</p>
<p>The anti-tamper lock can be queried and controlled with <a class="el" href="group__device__status.html#gaa7fc50ed7054eed6fedb229791125592" title="Checks whether the device is currently locked.">OmIsLocked()</a>, <a class="el" href="group__device__status.html#gaee8090cd743c037030b94fd9532f09f2" title="Sets the lock code for the device when it is connected.">OmSetLock()</a>, <a class="el" href="group__device__status.html#ga98ef5d1dea89ef11898eb443b55615dd" title="Sets the lock code for the device when it is connected.">OmUnlock()</a>.</p>
<p>Error-correcting code status can be set and queried with <a class="el" href="group__device__status.html#ga0190e53ce5c6e2a951c1e5411698ea7a" title="Sets the error-correcting code flag for the specified device.">OmSetEcc()</a> and <a class="el" href="group__device__status.html#ga4213616781314e28dbf69280a30f5fe4" title="Gets the error-correcting code flag for the specified device.">OmGetEcc()</a>.</p>
<p>Advanced commands can be sent with <a class="el" href="group__device__status.html#ga15580d1b8aa426a15915fb030518f8d4" title="Issues a direct command over the CDC port for a particular device.">OmCommand()</a>.</p>
<dl class="section see"><dt>See also:</dt><dd>Example code <a class="el" href="test_8c.html" title="Open Movement API Example: Self-test all connected devices.">test.c</a>, for an example of how to use the device status functions of the API. </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga38d39fc1b239750481a9e1d1e09d3d3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__device__status.html#ga38d39fc1b239750481a9e1d1e09d3d3a">OM_MEMORY_HEALTH_ERROR</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Threshold at or below which the <a class="el" href="group__device__status.html#ga037f3403839e450446875be5414ef146" title="Determine the health of the NAND flash memory on the specified device.">OmGetMemoryHealth()</a> result should be treated as a failure. </p>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

<p>Definition at line <a class="el" href="omapi_8h_source.html#l00404">404</a> of file <a class="el" href="omapi_8h_source.html">omapi.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga2e73da291028470f0afeb4ad971789f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__device__status.html#ga2e73da291028470f0afeb4ad971789f2">OM_MEMORY_HEALTH_WARNING</a>&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Threshold at or below which the <a class="el" href="group__device__status.html#ga037f3403839e450446875be5414ef146" title="Determine the health of the NAND flash memory on the specified device.">OmGetMemoryHealth()</a> result should be treated as a warning. </p>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

<p>Definition at line <a class="el" href="omapi_8h_source.html#l00405">405</a> of file <a class="el" href="omapi_8h_source.html">omapi.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gabe7b78da9c5b300c95f52d0d84710b04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__device__status.html#gabe7b78da9c5b300c95f52d0d84710b04">OM_LED_STATE</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enumeration of LED colours. </p>
<dl class="section note"><dt>Note:</dt><dd>In the <em>OM_LED_AUTO</em> setting, when connected, the device fades from off to yellow when charging; and from off to white when charged. The device will fade to and from red instead of off when the computer has recently written data to the mass storage drive (but this should not typically be observed through API access). </dd></dl>
<dl class="section remark"><dt>Remarks:</dt><dd>Values are from the bit pattern: 0b00000RGB. </dd></dl>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671" title="Sets the specified device&#39;s LED colour.">OmSetLed()</a> </dd></dl>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04a5631c62a80445183e3c676aba884bf00"></a>OM_LED_AUTO</em>&nbsp;</td><td>
<p>Automatic device-controlled LED to indicate state (default). </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04a813c2ef7722beedbfd2972bc7c284b7f"></a>OM_LED_OFF</em>&nbsp;</td><td>
<p>rgb(0,0,0) Off </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04ad66d8eeacbfff1ee32a32460caba9def"></a>OM_LED_BLUE</em>&nbsp;</td><td>
<p>rgb(0,0,1) Blue </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04a4d3b634463d7ebd7e555c4c541782f52"></a>OM_LED_GREEN</em>&nbsp;</td><td>
<p>rgb(0,1,0) Green </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04a53c7307e3c7e78a6e2dbcf334253ad6f"></a>OM_LED_CYAN</em>&nbsp;</td><td>
<p>rgb(0,1,1) Cyan </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04ad24f49da8f07c990c1886e03009d3d3c"></a>OM_LED_RED</em>&nbsp;</td><td>
<p>rgb(1,0,0) Red </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04a0c5c277d9e6c379114080167667705b7"></a>OM_LED_MAGENTA</em>&nbsp;</td><td>
<p>rgb(1,0,1) Magenta </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04a308364023f864420f99cc92ea673ceb3"></a>OM_LED_YELLOW</em>&nbsp;</td><td>
<p>rgb(1,1,0) Yellow </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggabe7b78da9c5b300c95f52d0d84710b04a7fd0f086bdf354819c65cc555a71906a"></a>OM_LED_WHITE</em>&nbsp;</td><td>
<p>rgb(1,1,1) White </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="omapi_8h_source.html#l00457">457</a> of file <a class="el" href="omapi_8h_source.html">omapi.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga15580d1b8aa426a15915fb030518f8d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga15580d1b8aa426a15915fb030518f8d4">OmCommand</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufferSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>expected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeoutMs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>parseParts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>parseMax</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Issues a direct command over the CDC port for a particular device. </p>
<p>Waits for a line with the specified response (until the timeout is hit). If the response is found, and parsing is required (parseParts != NULL), it parses the response (at '=' and ',' places) up to 'parseMax' token. </p>
<dl class="section note"><dt>Note:</dt><dd>This method is not generally recommended -- incorrect results could lead to unspecified behaviour. </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">command</td><td>The command string to send (typically followed with CRLF). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>A buffer to hold the response, or <em>NULL</em> if not required. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">bufferSize</td><td>The size (in bytes) of the output buffer. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">expected</td><td>The expected response prefix, or <em>NULL</em> if not specified (command will timeout if a response buffer is specified). </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">timeoutMs</td><td>The time, in milliseconds, after which the command will time-out and return. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">parseParts</td><td>A buffer to hold the parsed response, or <em>NULL</em> if parsing is not required. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">parseMax</td><td>The maximum number of entries the <em>parsePoints</em> buffer can hold. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The offset in the buffer of the start of the expected response, if found; or the offset in the buffer of the start of the error response string; otherwise the length of the unrecognized response. </dd></dl>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

</div>
</div>
<a class="anchor" id="gadb4931936b04fc2b2753dd7570fb0028"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#gadb4931936b04fc2b2753dd7570fb0028">OmGetAccelerometer</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the specified device's current accelerometer values. </p>
<p>A sample consists of three consecutive signed 16-bit numbers (representing the X-, Y- and Z-axes), with units of 1/256 g. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">x</td><td>Pointer to receive the x-axis value. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">y</td><td>Pointer to receive the y-axis value. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">z</td><td>Pointer to receive the z-axis value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_OK</em> if successful, an error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga11168e52e0879a91ff11566a05cbe219"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga11168e52e0879a91ff11566a05cbe219">OmGetBatteryHealth</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine the health of the battery on the specified device. </p>
<p>The device maintains an internal count of significant recharge cycles. </p>
<dl class="section remark"><dt>Remarks:</dt><dd>The device is rated to preserve 90% of its capacity (sufficient for 14-day data collection) after 500 recharge cycles. </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A non-negative value indicates the number of significant recharge cycles of the battery (a smaller number is better). A negative value indicates an error code for an issue within the API. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9b604ad6d817efca9167d86f6b852cef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga9b604ad6d817efca9167d86f6b852cef">OmGetBatteryLevel</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queries the specified device for the current battery charging level. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A non-negative value indicates the battery percentage level (0-99% = charging, 100% = fully charged). A negative value indicates an error code for an issue within the API. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4213616781314e28dbf69280a30f5fe4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga4213616781314e28dbf69280a30f5fe4">OmGetEcc</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the error-correcting code flag for the specified device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_TRUE</em> if ECC enabled, <em>OM_FALSE</em> if ECC disabled, an error code otherwise. </dd></dl>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

</div>
</div>
<a class="anchor" id="ga037f3403839e450446875be5414ef146"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga037f3403839e450446875be5414ef146">OmGetMemoryHealth</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine the health of the NAND flash memory on the specified device. </p>
<p>The device incorporates a wear-levelling 'Flash Translation Layer', error-correcting codes (ECC), and data checksums to minimize any data loss. To do this, the device must maintain a set of spare memory blocks on each memory 'plane'. This call retrieves the number of spare blocks on the NAND memory on the plane with the least spare blocks. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A non-negative value indicates the health of the NAND memory (a larger number is better, 0 indicates the device is unusable). A negative value indicates an error code for an issue within the API. </dd></dl>

</div>
</div>
<a class="anchor" id="ga197cb5b376387258a46a442f5a7350d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga197cb5b376387258a46a442f5a7350d2">OmGetTime</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a> *&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queries the specified device's internal real time clock. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">time</td><td>Pointer to a value to receive the current date/time. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_OK</em> if successful, an error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga319d82922d6535bde07ee51d389b2e05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga319d82922d6535bde07ee51d389b2e05">OmGetVersion</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>firmwareVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>hardwareVersion</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the firmware and hardware versions of the specified device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">firmwareVersion</td><td>Pointer to a value to hold the firmware version, or <em>NULL</em> if not required. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hardwareVersion</td><td>Pointer to a value to hold the hardware version, or <em>NULL</em> if not required. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_OK</em> if successful, an error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa7fc50ed7054eed6fedb229791125592"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#gaa7fc50ed7054eed6fedb229791125592">OmIsLocked</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>hasLockCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks whether the device is currently locked. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hasLockCode</td><td>Pointer to a value that receives a flag indicating whether the device has a non-zero lock code and will be locked whenever connected (OM_FALSE or OM_TRUE). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The current lock state: <em>OM_FALSE</em> if unlocked, <em>OM_TRUE</em> if locked, an error code otherwise. </dd></dl>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

</div>
</div>
<a class="anchor" id="ga86b956058c1d14caa7a44370b17b77d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga86b956058c1d14caa7a44370b17b77d1">OmSelfTest</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Performs a firmware-specific self-test on the specified device (e.g. </p>
<p>test peripherals). </p>
<dl class="section remark"><dt>Remarks:</dt><dd>A positive, non-zero self-test diagnostic code should be treated as an opaque, firmware-specific value indicating failure. </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_OK</em> if a the device successfully completed its self-test. A positive value indicates the device failed its self-test with the returned diagnostic code. A negative value indicates an error code for an issue within the API. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0190e53ce5c6e2a951c1e5411698ea7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga0190e53ce5c6e2a951c1e5411698ea7a">OmSetEcc</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the error-correcting code flag for the specified device. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramname">state</td><td><em>OM_TRUE</em> to enable ECC, <em>OM_FALSE</em> to disable ECC. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_OK</em> if successful, an error code otherwise. </dd></dl>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

</div>
</div>
<a class="anchor" id="gae974d7eec0b9c41a1251dfa63d4ec671"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#gae974d7eec0b9c41a1251dfa63d4ec671">OmSetLed</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__device__status.html#gabe7b78da9c5b300c95f52d0d84710b04">OM_LED_STATE</a>&#160;</td>
          <td class="paramname"><em>ledState</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the specified device's LED colour. </p>
<dl class="section remark"><dt>Remarks:</dt><dd>The default LED status, <em>OM_LED_AUTO</em>, allows the device to control its LED to indicate its state. </dd></dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramname">ledState</td><td>LED state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_OK</em> if successful, an error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gaee8090cd743c037030b94fd9532f09f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#gaee8090cd743c037030b94fd9532f09f2">OmSetLock</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the lock code for the device when it is connected. </p>
<p>The device will not be locked immediately, only when next connected. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramname">code</td><td>Lock code to use. 0 = no lock, 0xffff is reserved for internal use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The 'initial lock' state: <em>OM_FALSE</em> if unlocked, <em>OM_TRUE</em> if locked. Or an error code otherwise. </dd></dl>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

</div>
</div>
<a class="anchor" id="ga86748ef90383c9505def75d7bea49c45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga86748ef90383c9505def75d7bea49c45">OmSetTime</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datetime.html#ga5ae96407571b49c6086be47907389dfc">OM_DATETIME</a>&#160;</td>
          <td class="paramname"><em>time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the specified device's internal real time clock. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramname">time</td><td>the date/time to set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><em>OM_OK</em> if successful, an error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga98ef5d1dea89ef11898eb443b55615dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__device__status.html#ga98ef5d1dea89ef11898eb443b55615dd">OmUnlock</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the lock code for the device when it is connected. </p>
<p>The device will not be locked immediately, only when next connected. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceId</td><td>Identifier of the device. </td></tr>
    <tr><td class="paramname">code</td><td>Unlock code to use (0 is reserved to indicate no lock code, 0xffff is reserved for internal use). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The current lock state: <em>OM_FALSE</em> if unlocked, <em>OM_TRUE</em> if the unlock code was not accepted, an error code otherwise. </dd></dl>
<dl class="section since"><dt>Since:</dt><dd>1.2 </dd></dl>

</div>
</div>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>

    <li class="footer"><!-- Generated on Tue Feb 28 2012 23:02:38 for OMAPI by -->
    <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
